<mxfile host="app.diagrams.net" modified="2026-01-21T00:00:00.000Z" agent="draw.io" version="24.7.8" type="device">
  <diagram id="ecosystem" name="MYIO Ecosystem (Onboarding)">
    <mxGraphModel dx="1440" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1080" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <mxCell id="title" value="MYIO / GCDR — Visao Geral do Ecossistema (Onboarding)" style="text;html=1;fontSize=26;fontStyle=1;align=left;verticalAlign=top;spacingTop=10;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="40" y="20" width="1200" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="subtitle" value="Responsabilidades e fluxo: Apps → GCDR (cadastro/identidade) → Processamento/Orquestracao → Canais → Campo (Centrais/Devices)" style="text;html=1;fontSize=14;align=left;verticalAlign=top;spacingTop=6;spacingLeft=10;opacity=80;" vertex="1" parent="1">
          <mxGeometry x="40" y="60" width="1500" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="laneApps" value="Camada 1 — Usuarios e Aplicacoes" style="swimlane;html=1;rounded=1;startSize=30;horizontal=1;collapsible=0;strokeWidth=1;fillColor=#F3F4F6;" vertex="1" parent="1">
          <mxGeometry x="40" y="110" width="1840" height="160" as="geometry"/>
        </mxCell>
        <mxCell id="apps" value="Web App GCDR&#xa;• Admin / Operador&#xa;• Gestao (CRUD)&#xa;• Visualizacao / Console" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#111827;fillColor=#FFFFFF;" vertex="1" parent="laneApps">
          <mxGeometry x="40" y="50" width="300" height="90" as="geometry"/>
        </mxCell>
        <mxCell id="dashboards" value="Dashboards / Portais&#xa;• Head Office&#xa;• RedOffice&#xa;• Kiosk / Totem" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#111827;fillColor=#FFFFFF;" vertex="1" parent="laneApps">
          <mxGeometry x="380" y="50" width="300" height="90" as="geometry"/>
        </mxCell>
        <mxCell id="externalApps" value="Sistemas Externos&#xa;• ERP / CRM&#xa;• Parceiros&#xa;• Apps instaladores" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#111827;fillColor=#FFFFFF;" vertex="1" parent="laneApps">
          <mxGeometry x="720" y="50" width="300" height="90" as="geometry"/>
        </mxCell>
        <mxCell id="laneGCDR" value="Camada 2 — GCDR (Single Source of Truth)" style="swimlane;html=1;rounded=1;startSize=30;horizontal=1;collapsible=0;strokeWidth=1;fillColor=#FFF1F2;" vertex="1" parent="1">
          <mxGeometry x="40" y="290" width="1840" height="210" as="geometry"/>
        </mxCell>
        <mxCell id="gcdr" value="GCDR&#xa;(Base Unica de Cadastro / Identidade)&#xa;&#xa;• Customers (hierarquia)&#xa;• Centrais (gateways)&#xa;• Devices e Assets&#xa;• Users / Groups / Roles / Policies&#xa;• Regras / Thresholds / Bundles&#xa;• API Keys / JWT (multi-audience)&#xa;• Marketplace de integracoes" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=3;strokeColor=#B91C1C;fillColor=#FFFFFF;fontStyle=1;" vertex="1" parent="laneGCDR">
          <mxGeometry x="40" y="50" width="620" height="140" as="geometry"/>
        </mxCell>
        <mxCell id="gcdrNot" value="O que o GCDR NAO e&#xa;• Nao processa telemetria&#xa;• Nao decide alarmes&#xa;• Nao faz dispatch&#xa;• Nao substitui orquestradores" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#EF4444;fillColor=#FFF7ED;" vertex="1" parent="laneGCDR">
          <mxGeometry x="700" y="50" width="360" height="100" as="geometry"/>
        </mxCell>
        <mxCell id="openapi" value="OpenAPI / Swagger&#xa;• /docs&#xa;• openapi.yaml&#xa;• 140+ endpoints" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#B91C1C;fillColor=#FFFFFF;opacity=95;" vertex="1" parent="laneGCDR">
          <mxGeometry x="1100" y="50" width="300" height="100" as="geometry"/>
        </mxCell>
        <mxCell id="laneCore" value="Camada 3 — Processamento e Orquestracao" style="swimlane;html=1;rounded=1;startSize=30;horizontal=1;collapsible=0;strokeWidth=1;fillColor=#ECFDF5;" vertex="1" parent="1">
          <mxGeometry x="40" y="520" width="1840" height="260" as="geometry"/>
        </mxCell>
        <mxCell id="ingestion" value="Ingestion / Telemetry Processor&#xa;• Recebe MQTT / HTTP&#xa;• Normaliza eventos&#xa;• Gera candidatos a alarme" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#065F46;fillColor=#FFFFFF;" vertex="1" parent="laneCore">
          <mxGeometry x="40" y="50" width="360" height="120" as="geometry"/>
        </mxCell>
        <mxCell id="sqs" value="SQS (Filas)&#xa;• alarm-events (+ DLQ)&#xa;• telegram (+ DLQ)&#xa;• workorder (+ DLQ)&#xa;• webhook (+ DLQ)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#374151;fillColor=#FFFFFF;" vertex="1" parent="laneCore">
          <mxGeometry x="430" y="50" width="360" height="120" as="geometry"/>
        </mxCell>
        <mxCell id="orchestrator" value="Alarm Orchestrator (o cerebro)&#xa;• Decision Engine + Guards&#xa;• State Machine&#xa;• Dedup / Cooldown / Hysteresis&#xa;• Cria acoes de dispatch" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=3;strokeColor=#16A34A;fillColor=#FFFFFF;fontStyle=1;" vertex="1" parent="laneCore">
          <mxGeometry x="820" y="40" width="420" height="140" as="geometry"/>
        </mxCell>
        <mxCell id="dispatcher" value="Dispatcher Worker&#xa;• Consome filas de canais&#xa;• Renderiza templates&#xa;• Executa handlers" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#16A34A;fillColor=#FFFFFF;" vertex="1" parent="laneCore">
          <mxGeometry x="1270" y="50" width="280" height="120" as="geometry"/>
        </mxCell>
        <mxCell id="channels" value="Canais de Acao&#xa;• Telegram&#xa;• Ordem de Servico&#xa;• Webhook&#xa;• E-mail / SMS" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#F59E0B;fillColor=#FFFFFF;" vertex="1" parent="laneCore">
          <mxGeometry x="1580" y="50" width="220" height="120" as="geometry"/>
        </mxCell>
        <mxCell id="coreDB" value="DynamoDB&#xa;• GCDR Tables (cadastro)&#xa;• Orchestrator Single-table (alarmes/logs)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#111827;fillColor=#FFFFFF;" vertex="1" parent="laneCore">
          <mxGeometry x="820" y="190" width="420" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="eventbridge" value="EventBridge&#xa;• gcdr-events&#xa;• customer.* partner.* authz.*" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#111827;fillColor=#FFFFFF;" vertex="1" parent="laneCore">
          <mxGeometry x="430" y="190" width="360" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="laneField" value="Camada 4 — Campo / Edge (Centrais e Devices)" style="swimlane;html=1;rounded=1;startSize=30;horizontal=1;collapsible=0;strokeWidth=1;fillColor=#EFF6FF;" vertex="1" parent="1">
          <mxGeometry x="40" y="800" width="1840" height="220" as="geometry"/>
        </mxCell>
        <mxCell id="centrals" value="Centrais (Gateways)&#xa;• Orange Pi / Linux&#xa;• Node-RED&#xa;• Cache local&#xa;• Download de bundles (GCDR)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=3;strokeColor=#1D4ED8;fillColor=#FFFFFF;fontStyle=1;" vertex="1" parent="laneField">
          <mxGeometry x="40" y="50" width="480" height="130" as="geometry"/>
        </mxCell>
        <mxCell id="devices" value="Devices e Sensores&#xa;• Energia (3F 001 / 002 / 003...)&#xa;• Agua (Caixa d agua)&#xa;• Temperatura&#xa;• Equipamentos criticos" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#1D4ED8;fillColor=#FFFFFF;" vertex="1" parent="laneField">
          <mxGeometry x="560" y="50" width="380" height="130" as="geometry"/>
        </mxCell>
        <mxCell id="tb" value="ThingsBoard&#xa;• Dashboards / Widgets&#xa;• Visualizacao / Telemetria&#xa;(nao e o SSoT)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#7C3AED;fillColor=#FFFFFF;" vertex="1" parent="laneField">
          <mxGeometry x="980" y="50" width="280" height="130" as="geometry"/>
        </mxCell>
        <mxCell id="nodehub" value="NodeHub / Servicos Edge&#xa;• roteamento local&#xa;• integracoes de campo" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#111827;fillColor=#FFFFFF;" vertex="1" parent="laneField">
          <mxGeometry x="1300" y="50" width="240" height="130" as="geometry"/>
        </mxCell>
        <mxCell id="os" value="OS / Manutencao&#xa;• abertura/fechamento&#xa;• SLA / escalonamento" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#111827;fillColor=#FFFFFF;" vertex="1" parent="laneField">
          <mxGeometry x="1580" y="50" width="220" height="130" as="geometry"/>
        </mxCell>
        <mxCell id="e_apps_gcdr" value="01 Gestao / Auth" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#111827;fontSize=11;" edge="1" parent="1" source="apps" target="gcdr">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_ext_gcdr" value="01 APIs (JWT/Key)" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#111827;fontSize=11;" edge="1" parent="1" source="externalApps" target="gcdr">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_gcdr_centrals" value="02 Bundles / Regras" style="endArrow=block;html=1;strokeWidth=3;strokeColor=#B91C1C;fontSize=11;" edge="1" parent="1" source="gcdr" target="centrals">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_devices_ingestion" value="03 Telemetria" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#1D4ED8;fontSize=11;" edge="1" parent="1" source="devices" target="ingestion">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_ingestion_sqs" value="04 AlarmCandidate" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#065F46;fontSize=11;" edge="1" parent="1" source="ingestion" target="sqs">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_sqs_orch" value="05 Consume" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#374151;fontSize=11;" edge="1" parent="1" source="sqs" target="orchestrator">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_gcdr_orch" value="06 Rules Bundle" style="endArrow=block;html=1;strokeWidth=3;strokeColor=#B91C1C;fontSize=11;dashed=1;" edge="1" parent="1" source="gcdr" target="orchestrator">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_orch_db" value="07 Persist" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#16A34A;fontSize=11;" edge="1" parent="1" source="orchestrator" target="coreDB">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_gcdr_eventbridge" value="08 Events" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#B91C1C;fontSize=11;" edge="1" parent="1" source="gcdr" target="eventbridge">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_orch_dispatcher" value="09 Dispatch" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#16A34A;fontSize=11;" edge="1" parent="1" source="orchestrator" target="dispatcher">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_dispatcher_channels" value="10 Send" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#16A34A;fontSize=11;" edge="1" parent="1" source="dispatcher" target="channels">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_channels_os" value="11 Actions" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#F59E0B;fontSize=11;" edge="1" parent="1" source="channels" target="os">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_devices_tb" value="12 Visualizacao" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#7C3AED;fontSize=11;dashed=1;" edge="1" parent="1" source="devices" target="tb">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_centrals_nodehub" value="13 Edge" style="endArrow=block;html=1;strokeWidth=2;strokeColor=#1D4ED8;fontSize=11;dashed=1;" edge="1" parent="1" source="centrals" target="nodehub">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="callout" value="Leitura rapida:&#xa;• GCDR = cadastro + identidade + regras&#xa;• Ingestion/Orchestrator = inteligencia operacional&#xa;• Centrais/Devices = campo (origem dos dados)" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#111827;fillColor=#FFFBEB;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1440" y="300" width="400" height="100" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
